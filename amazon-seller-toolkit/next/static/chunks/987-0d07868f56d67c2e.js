!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5e9d690f-1b1c-4a73-ab1c-36aa89f8450b",e._sentryDebugIdIdentifier="sentry-dbid-5e9d690f-1b1c-4a73-ab1c-36aa89f8450b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{83720:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(92027),n=a(39378),s=a.n(n),i=a(17613),o=a.n(i);class l{static sanitizeValue(e){return'"'.concat(e.replaceAll('"','""'),'"')}static sanitizeValuesWithComma(e,t){e.forEach(e=>{"string"==typeof t[e]&&t[e].includes(",")&&(t[e]=this.sanitizeValue(t[e]))})}static handleNetworkError(e){if("ERR_NETWORK"===e.rawCode)throw new r.F0.Unauthorized({message:"Please ensure you have an active Seller Central session with the marketplace selected in the navbar"})}static getFormattedPeriod(e,t){switch(e){case"Weekly":return o().utc(t).format("YYYY-MM-DD");case"Monthly":return o().utc(t).format("MMMM YYYY");case"Quarterly":return o().utc(t).format("[Q]Q YYYY");default:throw Error("Unknown reporting range: ".concat(e))}}static getRangeFiltersByReportingRange(e,t){let a=t.format("YYYY");switch(e){case"Weekly":return[{id:"weekly-week",value:t.utc().format("YYYY-MM-DD"),valueType:e.toLowerCase()}];case"Monthly":return[{id:"monthly-year",value:a,valueType:null},{id:"".concat(a,"-month"),value:t.utc().format("YYYY-MM-DD"),valueType:e.toLowerCase()}];case"Quarterly":return[{id:"quarterly-year",value:a,valueType:null},{id:"".concat(a,"-quarter"),value:t.utc().format("YYYY-MM-DD"),valueType:e.toLowerCase()}];default:throw new r.F0.BadRequest({message:"Unrecognized reporting range type: ".concat(e)})}}}l.convertMultilineTextToArray=s().memoize(e=>Array.from(new Set(e.trim().split("\n").map(e=>e.trim().toUpperCase()).filter(e=>!!e)))),l.generateSheetData=(e,t)=>[Object.values(t),...e.map(e=>Object.keys(t).map(t=>e[t]))],l.generateCSVText=(e,t)=>[Object.values(t).join(","),...e.map(e=>Object.keys(t).map(t=>e[t]).join(","))].join("\n"),l.getSellerCentralSleepTime=()=>s().random(4750,5250)},46377:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});class r{static isInvalidDestination(e){let t="Google Sheet"===e.downloadDestinationType,a="Google Drive"===e.downloadDestinationType,r=e.isSavingToPreviousDestination&&!e.dataConfigurationId,n=(t||a)&&!e.googleDriveItem,s=t&&!e.googleSheetSheet,i=!!e.googleSheetSheet&&!e.dataConfigurationId;return r||n||s||i}}},37557:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});class r{}r.generateReportRefererUrl=(e,t,a)=>{let r=Object.fromEntries(t.filterSelections.filter(e=>e.value).map(e=>[e.id,e.value]));return"".concat(e,"?").concat(new URLSearchParams({"view-id":a,...r,"country-id":t.selectedCountries[0]}))}},31925:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var r=a(80230),n=a(37557),s=a(9462),i=a(37668),o=a(17382),l=a(39378),d=a.n(l);class c{async scrapeCsrfToken(){let e=await chrome.tabs.create({active:!1,url:this.csrfTokenUrl});if(!e.id)throw new o.F.ServerError({message:"Failed to open tab for ".concat(this.csrfTokenUrl)});let t=await chrome.scripting.executeScript({func:()=>{var e,t;let a=document.querySelector('meta[name="anti-csrftoken-a2z"]');return null==a?void 0:null===(t=a.attributes)||void 0===t?void 0:null===(e=t.getNamedItem("content"))||void 0===e?void 0:e.value},target:{tabId:e.id}});await chrome.tabs.remove(e.id);let a=t[0].result;if(!a)throw Error("Failed to get CSRF Token");return a}async addHeadersOverride(e){let{csrfToken:t,urlFilter:a,referer:r,origin:n}=e;await chrome.declarativeNetRequest.updateDynamicRules({addRules:[{action:{requestHeaders:[...t?[{header:"Anti-Csrftoken-A2z",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:t}]:[],{header:"Origin",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:n},{header:"Referer",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:r},{header:"Sec-Fetch-Site",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:"same-origin"}],type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS},condition:{initiatorDomains:[chrome.runtime.id],resourceTypes:Object.values(chrome.declarativeNetRequest.ResourceType),urlFilter:a},id:this.RULE_ID,priority:1}],removeRuleIds:[this.RULE_ID]})}handleCommonErrors(e){return(null==e?void 0:e.statusCode)===i.M.Forbidden?new o.F.Forbidden({message:"Please sign in to Amazon Seller Central ".concat(this.baseUrl)}):e}async removeHeadersOverride(){await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[this.RULE_ID]})}async getCsrfToken(){return this.csrfToken||(this.csrfToken=await this.scrapeCsrfToken()),this.csrfToken}static handleGraphQLLoginRedirect(e){if(!(null==e?void 0:e.status))throw new o.F.Forbidden;return e}async makeAPIRequest(e,t,a){try{let r=await this.axios.post(t,a);return"gql"===e?c.handleGraphQLLoginRedirect(r):r}catch(e){throw this.handleCommonErrors(e)}finally{await this.removeHeadersOverride()}}async makeRESTRequest(e,t){return this.makeAPIRequest("rest",e,t)}async makeGraphQLRequest(e,t){return this.makeAPIRequest("gql",e,t)}constructor(e,t){this.RULE_ID=parseInt(d().uniqueId(),10),this.csrfToken="",this.csrfTokenUrl=t,this.baseUrl=e,this.axios=(0,s.ZP)(!1,{axiosConfig:{adapter:"fetch",baseURL:this.baseUrl,fetchOptions:{redirect:"manual"},headers:{Accept:"*/*","Content-Type":"application/json"}}})}}var u=a(31791),p=a(98059),S=a(51195);class h{}function g(){let e=(0,u._)(["\n      query sellerMetadata {\n        getSellerMetaData {\n          marketplaceId\n          sellerId\n          asinUrl\n          byDateReports {\n            reportDefinitionId\n            title\n            translationKey\n            __typename\n          }\n          byAsinReports {\n            reportDefinitionId\n            title\n            translationKey\n            __typename\n          }\n          otherReports {\n            reportDefinitionId\n            title\n            translationKey\n            __typename\n          }\n          localeInfo {\n            currencyCode\n            locale\n            timeZone\n            __typename\n          }\n          __typename\n        }\n      }\n    "]);return g=function(){return e},e}function _(){let e=(0,u._)(["\n        query reportDataQuery($input: GetReportDataInput) {\n          getReportData(input: $input) {\n            granularity\n            hadPrevious\n            hasNext\n            size\n            startDate\n            endDate\n            page\n            columns {\n              label\n              valueFormat\n              isGraphable\n              translationKey\n              isDefaultSortAscending\n              isDefaultGraphed\n              isDefaultSelected\n              isDefaultSortColumn\n              __typename\n            }\n            rows\n            __typename\n          }\n        }\n      "]);return _=function(){return e},e}function m(){let e=(0,u._)(["\n        query reportDataQuery($input: GetReportDataInput) {\n          getReportData(input: $input) {\n            granularity\n            hadPrevious\n            hasNext\n            size\n            startDate\n            endDate\n            page\n            columns {\n              label\n              valueFormat\n              isGraphable\n              translationKey\n              isDefaultSortAscending\n              isDefaultGraphed\n              isDefaultSelected\n              isDefaultSortColumn\n              __typename\n            }\n            rows\n            __typename\n          }\n        }\n      "]);return m=function(){return e},e}function f(){let e=(0,u._)(["\n        query reportDataQuery($input: GetReportDataInput) {\n          getReportData(input: $input) {\n            columns {\n              label\n              valueFormat\n              translationKey\n            }\n          }\n        }\n      "]);return f=function(){return e},e}h.createRequestBody=(e,t,a)=>{if(!Array.isArray(e))return JSON.stringify({operationName:a,query:(0,S.Z)(e),variables:t});if(void 0!==t&&!Array.isArray(t))throw Error("Cannot create request body with given variable type, array expected");return JSON.stringify(e.reduce((e,a,r)=>(e.push({query:(0,S.Z)(a),variables:t?t[r]:void 0}),e),[]))};class A{}A.getLegacyReportId=e=>{switch(e){case"Date":return"102:SalesTrafficTimeSeries";case"SKU":return"102:DetailSalesTrafficBySKU";case"ChildASIN":return"102:DetailSalesTrafficByChildItem";case"ParentASIN":return"102:DetailSalesTrafficByParentItem";default:throw Error("Unknown request type: ".concat(e))}},A.SELLER_METADATA_REQUEST_BODY=h.createRequestBody((0,p.Ps)(g()),{input:{}},"sellerMetadata"),A.getSalesAndTrafficReportDataQuery=e=>h.createRequestBody((0,p.Ps)(_()),{input:{endDate:e.endISO,granularity:e.granularity,legacyReportId:A.getLegacyReportId("Date"),startDate:e.startISO}},"reportDataQuery"),A.getSalesAndTrafficByASINReportDataQuery=(e,t,a,r)=>{if("Date"===t)return A.getSalesAndTrafficReportDataQuery(e);let n=A.getLegacyReportId(t);return h.createRequestBody((0,p.Ps)(m()),{input:{asins:a,endDate:e.endISO,legacyReportId:n,page:r,startDate:e.startISO}},"reportDataQuery")},A.getReportColumnsQuery=e=>{let t=A.getLegacyReportId(e);return h.createRequestBody((0,p.Ps)(f()),{input:{legacyReportId:t}},"reportDataQuery")};var y=a(84084),C=a(61085);class v extends c{async fetchSQPAPIData(e,t){return await this.addHeadersOverride({csrfToken:await this.getCsrfToken(),origin:this.baseUrl,referer:n.Z.generateReportRefererUrl("".concat(this.baseUrl,"/brand-analytics/dashboard/query-performance"),e,t?"query-performance-brands-view":"query-performance-asin-view"),urlFilter:"".concat(this.baseUrl,"/api")}),(await this.makeRESTRequest("/api/brand-analytics/v1/dashboard/query-performance/reports",e)).data.reportsV2[0]}async fetchSCPAPIData(e){return await this.addHeadersOverride({csrfToken:await this.getCsrfToken(),origin:this.baseUrl,referer:y.Z.getSCPFetchAPIDataReferer(this.baseUrl,e),urlFilter:"".concat(this.baseUrl,"/api")}),(await this.makeRESTRequest("/api/brand-analytics/v1/dashboard/brand-catalog-performance/reports",e)).data.reportsV2[0]}async fetchTSTAPIData(e){return await this.addHeadersOverride({csrfToken:await this.getCsrfToken(),origin:this.baseUrl,referer:C.Z.getTSTFetchAPIDataReferer(this.baseUrl,e),urlFilter:"".concat(this.baseUrl,"/api")}),(await this.makeRESTRequest("/api/brand-analytics/v1/dashboard/top-search-terms/reports",e)).data.reportsV2[0]}async fetchMetadata(e,t,a){return await this.addHeadersOverride({csrfToken:await this.getCsrfToken(),origin:this.baseUrl,referer:"".concat(t,"?").concat(new URLSearchParams({"country-id":e})),urlFilter:"".concat(this.baseUrl,"/api")}),(await this.makeRESTRequest(a,{selectedCountries:[e]})).data}async fetchSQPMetadata(e){let t="".concat(this.baseUrl,"/brand-analytics/dashboard/query-performance");return this.fetchMetadata(e,t,"/api/brand-analytics/v1/dashboard/query-performance/metadata")}async fetchSCPMetadata(e){let t="".concat(this.baseUrl,"/brand-analytics/dashboard/brand-catalog-performance");return this.fetchMetadata(e,t,"/api/brand-analytics/v1/dashboard/brand-catalog-performance/metadata")}async fetchTSTMetadata(e){let t="".concat(this.baseUrl,"/brand-analytics/dashboard/top-search-terms");return this.fetchMetadata(e,t,"/api/brand-analytics/v1/dashboard/top-search-terms/metadata")}async fetchSalesAndTrafficReportByASIN(e,t,a,r){return await this.addHeadersOverride({origin:this.baseUrl,referer:"".concat(this.baseUrl,"/business-reports/ref=xx_sitemetric_favb_xx"),urlFilter:"".concat(this.baseUrl,"/business-reports/api")}),(await this.makeGraphQLRequest("/business-reports/api",A.getSalesAndTrafficByASINReportDataQuery(e,t,a,r))).data}async fetchSalesAndTrafficReportColumns(e){return await this.addHeadersOverride({origin:this.baseUrl,referer:"".concat(this.baseUrl,"/business-reports/ref=xx_sitemetric_favb_xx"),urlFilter:"".concat(this.baseUrl,"/business-reports/api")}),(await this.makeGraphQLRequest("/business-reports/api",A.getReportColumnsQuery(e))).data}async fetchSalesAndTrafficReport(e){return await this.addHeadersOverride({origin:this.baseUrl,referer:"".concat(this.baseUrl,"/business-reports/ref=xx_sitemetric_favb_xx"),urlFilter:"".concat(this.baseUrl,"/business-reports/api")}),(await this.makeGraphQLRequest("/business-reports/api",A.getSalesAndTrafficReportDataQuery(e))).data}async fetchSellerMetadata(){return await this.addHeadersOverride({origin:this.baseUrl,referer:"".concat(this.baseUrl,"/business-reports/ref=xx_sitemetric_favb_xx"),urlFilter:"".concat(this.baseUrl,"/business-reports/api")}),(await this.makeGraphQLRequest("/business-reports/api",A.SELLER_METADATA_REQUEST_BODY)).data}constructor(e){let t="https://sellercentral.amazon.".concat(r.aT[e].urlSuffix);super(t,"".concat(t,"/brand-analytics/dashboard/"))}}class B{static getInstance(e){if(B.marketplaceCache[e])return B.marketplaceCache[e];let t=new v(e);return B.marketplaceCache[e]=t,t}static async fetchSQPAPIData(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSQPAPIData(...a)}static async fetchSCPAPIData(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSCPAPIData(...a)}static async fetchTSTAPIData(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchTSTAPIData(...a)}static async fetchSQPMetadata(e){return this.getInstance(e).fetchSQPMetadata(e)}static async fetchSCPMetadata(e){return this.getInstance(e).fetchSCPMetadata(e)}static async fetchTSTMetadata(e){return this.getInstance(e).fetchTSTMetadata(e)}static async fetchSalesAndTrafficReportByASIN(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSalesAndTrafficReportByASIN(...a)}static async fetchSalesAndTrafficReport(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSalesAndTrafficReport(...a)}static async fetchSalesAndTrafficReportColumns(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSalesAndTrafficReportColumns(...a)}static async fetchSellerMetadata(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return this.getInstance(e).fetchSellerMetadata(...a)}static async getBaseUrl(e){return this.getInstance(e).baseUrl}}B.marketplaceCache={}},97155:function(e,t,a){"use strict";a.d(t,{AC:function(){return n},FA:function(){return o},K5:function(){return i},ZP:function(){return r},ir:function(){return l},r6:function(){return s}});class r{static getColumns(e){switch(e){case"Date":return{labels:r.SALES_AND_TRAFFIC_COLUMN_LABELS,order:r.SALES_AND_TRAFFIC_COLUMNS_ORDER};case"SKU":return{labels:r.SALES_AND_TRAFFIC_BY_SKU_LABELS,order:r.SALES_AND_TRAFFIC_BY_SKU_ORDER};case"ChildASIN":return{labels:r.SALES_AND_TRAFFIC_BY_CHILD_ASIN_LABELS,order:r.SALES_AND_TRAFFIC_BY_CHILD_ASIN_ORDER};case"ParentASIN":return{labels:r.SALES_AND_TRAFFIC_BY_PARENT_ASIN_LABELS,order:r.SALES_AND_TRAFFIC_BY_CHILD_ASIN_ORDER};default:throw Error("Unknown request type")}}}r.SALES_AND_TRAFFIC_COLUMNS_ORDER=["SC_MA_Date_25913","SC_MA_OrderedProductSales_40591","SCA_BR_OrderedProductSales_BB","SC_MA_UnitsOrdered_40590","SCA_BR_UnitsOrdered_BB","SC_MA_TotalOrderItems_1","SCA_BR_TotalOrderItems_BB","SC_MA_SalesPerOrderItem_1","SCA_BR_AverageSalesPerOrderItem_BB","SC_MA_UnitsPerOrderItem_1","SCA_BR_AverageUnitsPerOrderItem_BB","SC_MA_AverageSellingPrice_25919","SCA_BR_AverageSellingPrice_BB","SC_MA_MobileAppPageViews","SC_MA_MobileAppPageViews_BB","SC_MA_BrowserPageViews","SC_MA_BrowserPageViews_BB","SC_MA_PageViews_Total","SC_MA_PageViews_Total_BB","SC_MA_MobileAppSessions","SC_MA_MobileAppSessions_BB","SC_MA_BrowserSessions","SC_MA_BrowserSessions_BB","SC_MA_Sessions_Total","SC_MA_Sessions_Total_BB","SC_MA_BuyBoxPercentage_25956","SC_MA_BuyBoxPercentage_25956_BB","SC_MA_OrderItemSessionPercentage_1","SCA_BR_OrderItemSessionPercentage_BB_NEW","SC_MA_UnitSessionPercentage_25957","SCA_BR_UnitSessionPercentage_BB_NEW","SC_MA_AverageOfferCount_25954","SC_MA_AverageParentItems_25958","SC_MA_UnitsRefunded_25980","SC_MA_RefundRate_25981","SC_MA_FeedbackReceived_25982","SC_MA_NegativeFeedbackReceived_25983","SC_MA_ReceivedNegativeFeedbackRate_25984","SC_MA_AToZClaimsGranted_25985","SC_MA_ClaimsAmount_25986","SC_MA_ShippedProductSales_0002","SC_MA_UnitsShipped_0001","SC_MA_OrdersShipped_0001","Date Range"],r.SALES_AND_TRAFFIC_COLUMN_LABELS={SC_MA_Date_25913:"Date",SC_MA_OrderedProductSales_40591:"Ordered Product Sales",SCA_BR_OrderedProductSales_BB:"Ordered Product Sales - B2B",SC_MA_UnitsOrdered_40590:"Units Ordered",SCA_BR_UnitsOrdered_BB:"Units Ordered - B2B",SC_MA_TotalOrderItems_1:"Total Order Items",SCA_BR_TotalOrderItems_BB:"Total Order Items - B2B",SC_MA_SalesPerOrderItem_1:"Sales per Order Item",SCA_BR_AverageSalesPerOrderItem_BB:"Average Sales per Order Item - B2B",SC_MA_UnitsPerOrderItem_1:"Units per Order Item",SCA_BR_AverageUnitsPerOrderItem_BB:"Average Units per Order Item - B2B",SC_MA_AverageSellingPrice_25919:"Average Selling Price",SCA_BR_AverageSellingPrice_BB:"Average Selling Price - B2B",SC_MA_MobileAppPageViews:"Page Views - Mobile App",SC_MA_MobileAppPageViews_BB:"Page Views - Mobile App - B2B",SC_MA_BrowserPageViews:"Page Views - Browser",SC_MA_BrowserPageViews_BB:"Page Views - Browser - B2B",SC_MA_PageViews_Total:"Page Views - Total",SC_MA_PageViews_Total_BB:"Page Views - Total - B2B",SC_MA_MobileAppSessions:"Sessions - Mobile App",SC_MA_MobileAppSessions_BB:"Sessions - Mobile App - B2B",SC_MA_BrowserSessions:"Sessions - Browser",SC_MA_BrowserSessions_BB:"Sessions - Browser - B2B",SC_MA_Sessions_Total:"Sessions - Total",SC_MA_Sessions_Total_BB:"Sessions - Total - B2B",SC_MA_BuyBoxPercentage_25956:"Buy Box Percentage",SC_MA_BuyBoxPercentage_25956_BB:"Buy Box Percentage - B2B",SC_MA_OrderItemSessionPercentage_1:"Order Item Session Percentage",SCA_BR_OrderItemSessionPercentage_BB_NEW:"Order Item Session Percentage - B2B",SC_MA_UnitSessionPercentage_25957:"Unit Session Percentage",SCA_BR_UnitSessionPercentage_BB_NEW:"Unit Session Percentage - B2B",SC_MA_AverageOfferCount_25954:"Average Offer Count",SC_MA_AverageParentItems_25958:"Average Parent Items",SC_MA_UnitsRefunded_25980:"Units Refunded",SC_MA_RefundRate_25981:"Refund Rate",SC_MA_FeedbackReceived_25982:"Feedback Received",SC_MA_NegativeFeedbackReceived_25983:"Negative Feedback Received",SC_MA_ReceivedNegativeFeedbackRate_25984:"Received Negative Feedback Rate",SC_MA_AToZClaimsGranted_25985:"A-to-z Claims Granted",SC_MA_ClaimsAmount_25986:"Claims Amount",SC_MA_ShippedProductSales_0002:"Shipped Product Sales",SC_MA_UnitsShipped_0001:"Units Shipped",SC_MA_OrdersShipped_0001:"Orders Shipped","Date Range":"Date Range"},r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_ORDER=["SC_MA_MobileAppSessions","SC_MA_MobileAppSessions_BB","SC_MA_BrowserSessions","SC_MA_BrowserSessions_BB","SC_MA_Sessions_Total","SC_MA_Sessions_Total_BB","SC_MA_MobileAppSessionPercentage","SC_MA_MobileAppSessionPercentage_BB","SC_MA_BrowserSessionPercentage","SC_MA_BrowserSessionPercentage_BB","SC_MA_SessionPercentage_Total","SC_MA_SessionPercentage_Total_BB","SC_MA_MobileAppPageViews","SC_MA_MobileAppPageViews_BB","SC_MA_BrowserPageViews","SC_MA_BrowserPageViews_BB","SC_MA_PageViews_Total","SC_MA_PageViews_Total_BB","SC_MA_MobileAppPageViewsPercentage","SC_MA_MobileAppPageViewsPercentage_BB","SC_MA_BrowserPageViewsPercentage","SC_MA_BrowserPageViewsPercentage_BB","SC_MA_PageViewsPercentage_Total","SC_MA_PageViewsPercentage_Total_BB","SC_MA_BuyBoxPercentage_25956","SC_MA_BuyBoxPercentage_25956_BB","SC_MA_UnitsOrdered_40590","SCA_BR_UnitsOrdered_BB","SC_MA_UnitSessionPercentage_25957","SCA_BR_UnitSessionPercentage_BB_NEW","SC_MA_OrderedProductSales_40591","SCA_BR_OrderedProductSales_BB","SC_MA_TotalOrderItems_1","SCA_BR_TotalOrderItems_BB","Date Range"],r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_LABELS={SC_MA_MobileAppSessions:"Sessions - Mobile App",SC_MA_MobileAppSessions_BB:"Sessions - Mobile App - B2B",SC_MA_BrowserSessions:"Sessions - Browser",SC_MA_BrowserSessions_BB:"Sessions - Browser - B2B",SC_MA_Sessions_Total:"Sessions - Total",SC_MA_Sessions_Total_BB:"Sessions - Total - B2B",SC_MA_MobileAppSessionPercentage:"Session Percentage - Mobile App",SC_MA_MobileAppSessionPercentage_BB:"Session Percentage - Mobile App - B2B",SC_MA_BrowserSessionPercentage:"Session Percentage - Browser",SC_MA_BrowserSessionPercentage_BB:"Session Percentage - Browser - B2B",SC_MA_SessionPercentage_Total:"Session Percentage - Total",SC_MA_SessionPercentage_Total_BB:"Session Percentage - Total - B2B",SC_MA_MobileAppPageViews:"Page Views - Mobile App",SC_MA_MobileAppPageViews_BB:"Page Views - Mobile App - B2B",SC_MA_BrowserPageViews:"Page Views - Browser",SC_MA_BrowserPageViews_BB:"Page Views - Browser - B2B",SC_MA_PageViews_Total:"Page Views - Total",SC_MA_PageViews_Total_BB:"Page Views - Total - B2B",SC_MA_MobileAppPageViewsPercentage:"Page Views Percentage - Mobile App",SC_MA_MobileAppPageViewsPercentage_BB:"Page Views Percentage - Mobile App - B2B",SC_MA_BrowserPageViewsPercentage:"Page Views Percentage - Browser",SC_MA_BrowserPageViewsPercentage_BB:"Page Views Percentage - Browser - B2B",SC_MA_PageViewsPercentage_Total:"Page Views Percentage - Total",SC_MA_PageViewsPercentage_Total_BB:"Page Views Percentage - Total - B2B",SC_MA_BuyBoxPercentage_25956:"Buy Box Percentage",SC_MA_BuyBoxPercentage_25956_BB:"Buy Box Percentage - B2B",SC_MA_UnitsOrdered_40590:"Units Ordered",SCA_BR_UnitsOrdered_BB:"Units Ordered - B2B",SC_MA_UnitSessionPercentage_25957:"Unit Session Percentage",SCA_BR_UnitSessionPercentage_BB_NEW:"Unit Session Percentage - B2B",SC_MA_OrderedProductSales_40591:"Ordered Product Sales",SCA_BR_OrderedProductSales_BB:"Ordered Product Sales - B2B",SC_MA_TotalOrderItems_1:"Total Order Items",SCA_BR_TotalOrderItems_BB:"Total Order Items - B2B","Date Range":"Date Range"},r.SALES_AND_TRAFFIC_BY_PARENT_ASIN_ORDER=["SC_MA_ParentASIN_25990","MYG_Growth_Opportunities","sc_mat-ss_colDef_title",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_ORDER],r.SALES_AND_TRAFFIC_BY_PARENT_ASIN_LABELS={SC_MA_ParentASIN_25990:"(Parent) ASIN",MYG_Growth_Opportunities:"Growth Opportunities and Total Potential Sales Lift","sc_mat-ss_colDef_title":"Title",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_LABELS},r.SALES_AND_TRAFFIC_BY_CHILD_ASIN_ORDER=["SC_MA_ParentASIN_25990","SC_MA_ChildASIN_25991","MYG_Growth_Opportunities","sc_mat-ss_colDef_title",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_ORDER],r.SALES_AND_TRAFFIC_BY_CHILD_ASIN_LABELS={SC_MA_ParentASIN_25990:"(Parent) ASIN",SC_MA_ChildASIN_25991:"(Child) ASIN",MYG_Growth_Opportunities:"Growth Opportunities and Total Potential Sales Lift","sc_mat-ss_colDef_title":"Title",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_LABELS},r.SALES_AND_TRAFFIC_BY_SKU_ORDER=["SC_MA_ParentASIN_25990","SC_MA_ChildASIN_25991","sc_mat-ss_colDef_title","SC_MA_SKU_25959",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_ORDER],r.SALES_AND_TRAFFIC_BY_SKU_LABELS={SC_MA_ParentASIN_25990:"(Parent) ASIN",SC_MA_ChildASIN_25991:"(Child) ASIN","sc_mat-ss_colDef_title":"Title",SC_MA_SKU_25959:"SKU",...r.SALES_AND_TRAFFIC_BY_PRODUCT_BASE_LABELS};let n="SC_MA_Date_25913",s="sc_mat-ss_colDef_title",i="MYG_Growth_Opportunities",o={Date:{[n]:0,SC_MA_OrderedProductSales_40591:1},SKU:{SC_MA_ParentASIN_25990:0,SC_MA_ChildASIN_25991:1,SC_MA_SKU_25959:3},ChildASIN:{SC_MA_ParentASIN_25990:0,SC_MA_ChildASIN_25991:1,[i]:2},ParentASIN:{SC_MA_ParentASIN_25990:0,[i]:1}},l={Date:{[n]:0},SKU:{SC_MA_ParentASIN_25990:0,SC_MA_ChildASIN_25991:1,[s]:2,SC_MA_SKU_25959:3},ChildASIN:{SC_MA_ParentASIN_25990:0,SC_MA_ChildASIN_25991:1,[i]:2,[s]:3},ParentASIN:{SC_MA_ParentASIN_25990:0,[i]:1,[s]:2}}},84084:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(37557);class n{}n.SCP_DATA_COLUMNS={"asin-title":"ASIN Title",asin:"ASIN",category:"Category","impressions-count":"Impressions: Impressions","impression-price":"Impressions: Price (Median)","same-day-shipping-impressions":"Impressions: Same Day Shipping Speed","one-day-shipping-impressions":"Impressions: 1D Shipping Speed","two-day-shipping-impressions":"Impressions: 2D Shipping Speed",clicks:"Clicks: Clicks","ctr-clicks":"Clicks: Click Rate (CTR)","click-price":"Clicks: Price (Median)","same-day-shipping-clicks":"Clicks: Same Day Shipping Speed","one-day-shipping-clicks":"Clicks: 1D Shipping Speed","two-day-shipping-clicks":"Clicks: 2D Shipping Speed","cart-adds-count":"Cart Adds: Cart Adds","cart-adds-price":"Cart Adds: Price (Median)","same-day-shipping-cart-adds":"Cart Adds: Same Day Shipping Speed","one-day-shipping-cart-adds":"Cart Adds: 1D Shipping Speed","two-day-shipping-cart-adds":"Cart Adds: 2D Shipping Speed","purchases-count":"Purchases: Purchases","total-sales-purchases":"Purchases: Search Traffic Sales","conversion-rate":"Purchases: Conversion Rate %","purchase-price":"Purchases: Price (Median)","same-day-shipping-purchases":"Purchases: Same Day Shipping Speed","one-day-shipping-purchases":"Purchases: 1D Shipping Speed","two-day-shipping-purchases":"Purchases: 2D Shipping Speed",marketplace:"Marketplace",period:"Reporting Date"},n.getSCPFetchAPIDataReferer=(e,t)=>r.Z.generateReportRefererUrl("".concat(e,"/brand-analytics/dashboard/brand-catalog-performance"),t,"brand-catalog-performance-default-view")},55696:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(37557);class n{}n.SQP_ASIN_DATA_COLUMNS={asin:"ASIN","qp-asin-query":"Search Query","qp-asin-query-rank":"Search Query Score","qp-asin-query-volume":"Search Query Volume","qp-asin-impressions":"Impressions: Total Count","qp-asin-count-impressions":"Impressions: ASIN Count","qp-asin-share-impressions":"Impressions: ASIN Share %","qp-asin-clicks":"Clicks: Total Count","qp-click-rate":"Clicks: Click Rate %","qp-asin-count-clicks":"Clicks: ASIN Count","qp-asin-share-clicks":"Clicks: ASIN Share %","qp-asin-median-query-price-clicks":"Clicks: Price (Median)","qp-asin-median-price-clicks":"Clicks: ASIN Price (Median)","qp-asin-same-day-shipping-clicks":"Clicks: Same Day Shipping Speed","qp-asin-one-day-shipping-clicks":"Clicks: 1D Shipping Speed","qp-asin-two-day-shipping-clicks":"Clicks: 2D Shipping Speed","qp-asin-cart-adds":"Cart Adds: Total Count","qp-asin-cart-add-rate":"Cart Adds: Cart Add Rate %","qp-asin-count-cart-adds":"Cart Adds: ASIN Count","qp-asin-share-cart-adds":"Cart Adds: ASIN Share %","qp-asin-median-query-price-cart-adds":"Cart Adds: Price (Median)","qp-asin-median-price-cart-adds":"Cart Adds: ASIN Price (Median)","qp-asin-same-day-shipping-cart-adds":"Cart Adds: Same Day Shipping Speed","qp-asin-one-day-shipping-cart-adds":"Cart Adds: 1D Shipping Speed","qp-asin-two-day-shipping-cart-adds":"Cart Adds: 2D Shipping Speed","qp-asin-purchases":"Purchases: Total Count","qp-asin-purchase-rate":"Purchases: Purchase Rate %","qp-asin-count-purchases":"Purchases: ASIN Count","qp-asin-share-purchases":"Purchases: ASIN Share %","qp-asin-median-query-price-purchases":"Purchases: Price (Median)","qp-asin-median-price-purchases":"Purchases: ASIN Price (Median)","qp-asin-same-day-shipping-purchases":"Purchases: Same Day Shipping Speed","qp-asin-one-day-shipping-purchases":"Purchases: 1D Shipping Speed","qp-asin-two-day-shipping-purchases":"Purchases: 2D Shipping Speed",marketplace:"Marketplace",period:"Reporting Date"},n.SQP_BRAND_DATA_COLUMNS={brand:"Brand","qp-brand-query":"Search Query","qp-query-rank":"Search Query Score","qp-query-volume":"Search Query Volume","qp-impressions":"Impressions: Total Count","qp-brand-count-impressions":"Impressions: Brand Count","qp-brand-share-impressions":"Impressions: Brand Share %","qp-clicks":"Clicks: Total Count","qp-click-rate":"Clicks: Click Rate %","qp-brand-count-clicks":"Clicks: Brand Count","qp-brand-share-clicks":"Clicks: Brand Share %","qp-clicks-price":"Clicks: Price (Median)","qp-clicks-brand-price":"Clicks: Brand Price (Median)","qp-same-day-shipping-clicks":"Clicks: Same Day Shipping Speed","qp-one-day-shipping-clicks":"Clicks: 1D Shipping Speed","qp-two-day-shipping-clicks":"Clicks: 2D Shipping Speed","qp-cart-adds":"Cart Adds: Total Count","qp-cart-add-rate":"Cart Adds: Cart Add Rate %","qp-cart-adds-brand-count":"Cart Adds: Brand Count","qp-cart-adds-brand-share":"Cart Adds: Brand Share %","qp-cart-adds-price":"Cart Adds: Price (Median)","qp-same-day-shipping-cart-adds":"Cart Adds: Same Day Shipping Speed","qp-one-day-shipping-cart-adds":"Cart Adds: 1D Shipping Speed","qp-two-day-shipping-cart-adds":"Cart Adds: 2D Shipping Speed","qp-purchases":"Purchases: Total Count","qp-purchase-rate":"Purchases: Purchase Rate %","qp-purchases-brand-count":"Purchases: Brand Count","qp-purchases-brand-share":"Purchases: Brand Share %","qp-purchase-price":"Purchases: Price (Median)","qp-purchases-brand-price":"Purchases: Brand Price (Median)","qp-same-day-shipping-purchases":"Purchases: Same Day Shipping Speed","qp-one-day-shipping-purchases":"Purchases: 1D Shipping Speed","qp-two-day-shipping-purchases":"Purchases: 2D Shipping Speed",marketplace:"Marketplace",period:"Reporting Date"},n.getSQPFetchAPIDataReferer=(e,t,a)=>r.Z.generateReportRefererUrl("".concat(e,"/brand-analytics/dashboard/query-performance"),t,a?"query-performance-brands-view":"query-performance-asin-view")},61085:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(37557);class n{}n.TST_DATA_COLUMNS={"st-search-frequency":"Search Frequency Rank","st-search-term":"Search Term","st-top-brand-1":"Top Clicked Brand #1","st-top-brand-2":"Top Clicked Brands #2","st-top-brand-3":"Top Clicked Brands #3","st-top-category-1":"Top Clicked Category #1","st-top-category-2":"Top Clicked Category #2","st-top-category-3":"Top Clicked Category #3","st-top-asin-1":"Top Clicked Product #1: ASIN","st-top-asin-title-1":"Top Clicked Product #1: Product Title","st-top-asin-click-share-1":"Top Clicked Product #1: Click Share","st-top-asin-conversion-share-1":"Top Clicked Product #1: Conversion Share","st-top-asin-2":"Top Clicked Product #2: ASIN","st-top-asin-title-2":"Top Clicked Product #2: Product Title","st-top-asin-click-share-2":"Top Clicked Product #2: Product Title","st-top-asin-conversion-share-2":"Top Clicked Product #2: Conversion Share","st-top-asin-3":"Top Clicked Product #3: ASIN","st-top-asin-title-3":"Top Clicked Product #3: Product Title","st-top-asin-click-share-3":"Top Clicked Product #3: Click Share","st-top-asin-conversion-share-3":"Top Clicked Product #3: Click Share",period:"Reporting Date",brands:"Brands",keywords:"Keywords"},n.getTSTFetchAPIDataReferer=(e,t)=>r.Z.generateReportRefererUrl("".concat(e,"/brand-analytics/dashboard/top-search-terms"),t,"top-search-terms-default-view")},61600:function(e,t,a){"use strict";a.d(t,{Z:function(){return ee}});var r=a(31549),n=a(73207),s=a(92103),i=a(45576),o=a(63552),l=a(91617),d=a(36689),c=a(53240),u=a(90670),p=a(58823),S=a(20351),h=a(1311),g=a(49482),_=a(8104),m=a(44194),f=a(65107),A=a(45304),y=a(24643);class C{}C.isUrl=e=>/^(http|https):\/\//.test(e),C.isGoogleDriveItemUrl=e=>C.isGoogleDriveFolderUrl(e)||C.isGoogleSheetUrl(e),C.isGoogleDriveFolderUrl=e=>/^(https:\/\/)?drive.google.com\/drive\/(u\/\d+\/)?folders\/[^?\n\r\t]*/i.test(e),C.isGoogleSheetUrl=e=>/^(https:\/\/)?docs.google.com\/spreadsheets\/d\/[^?\n\r\t]*/i.test(e),C.getGoogleDriveFolderUrl=e=>"https://drive.google.com/drive/u/0/folders/".concat(e),C.getGoogleSheetUrl=(e,t)=>"https://docs.google.com/spreadsheets/d/".concat(e,"/edit").concat(t?"?gid=".concat(t,"#gid=").concat(t):""),C.getGoogleDriveItemLink=(e,t,a)=>{switch(t){case"Google Drive":return C.getGoogleDriveFolderUrl(e);case"Google Sheet":return C.getGoogleSheetUrl(e,null!=a?a:null);default:throw Error("File is not a Google Drive item")}};var v=e=>{let{disabled:t,tooltipText:a,children:n,...s}=e;return(0,r.jsx)(o.Z,{disableHoverListener:!t,placement:"top",title:a,"data-sentry-element":"Tooltip","data-sentry-component":"TooltipMenuItem","data-sentry-source-file":"TooltipMenuItem.tsx",children:(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{...s,disabled:t,"data-sentry-element":"MenuItem","data-sentry-source-file":"TooltipMenuItem.tsx",children:n})})})},B=a(15160),P=a(12875),D=a(93490),I=a(12410),T=a(60889),w=a(13175),M=a(29426),b=a(75052),x={alignItems:"center",display:"flex",flexDirection:"column",gap:1,height:128,justifyContent:"center",width:"100%"},R=e=>{let{link:t,message:a}=e;return(0,r.jsxs)(s.Z,{sx:x,"data-sentry-element":"Box","data-sentry-component":"AutocompleteNoOptions","data-sentry-source-file":"AutocompleteNoOptions.tsx",children:[(0,r.jsx)(i.Z,{fontWeight:"medium","data-sentry-element":"Typography","data-sentry-source-file":"AutocompleteNoOptions.tsx",children:a}),t?(0,r.jsx)(b.Z,{color:"primary.main",href:t.location,sx:{textDecoration:"underline"},children:t.text}):null]})},k=a(4821),N=a(23795),O=a(27178),F=a.n(O),U=a(18648),j=a(33759),q=a(97155),E=a(84084),Z=a(55696),L=a(61085);let G={SQPASINs:Z.Z.SQP_ASIN_DATA_COLUMNS,SQPBrands:Z.Z.SQP_BRAND_DATA_COLUMNS,SCP:E.Z.SCP_DATA_COLUMNS,TST:L.Z.TST_DATA_COLUMNS,BusinessByDate:q.ZP.getColumns("Date").labels,BusinessByASINChild:q.ZP.getColumns("ChildASIN").labels,BusinessByASINSKU:q.ZP.getColumns("SKU").labels,BusinessByASINParent:q.ZP.getColumns("ParentASIN").labels};var V=e=>{var t,a,d,u,p,h,_,f,A,y,v,b,x,O,q,E;let{onClose:Z,onUpdate:L,reportType:V,open:Y,reportFormik:Q,editConfigurationDetails:H,getSheetColumnHeadersMutation:W,selectedColumns:K}=e,{openDialog:z}=(0,M.HW)(),$=(0,m.useMemo)(()=>Object.entries(null!=K?K:G[V]).map(e=>{let[t,a]=e;return{key:t,value:a}}),[V,K]),J=null!==(f=null!==(_=null===(t=Q.values.googleSheetSheet)||void 0===t?void 0:t.id)&&void 0!==_?_:null==H?void 0:null===(a=H.sheet)||void 0===a?void 0:a.id)&&void 0!==f?f:null,{googleDriveItem:X}=Q.values,ee=null!==(y=null!==(A=null==X?void 0:X.id)&&void 0!==A?A:null==H?void 0:H.googleDriveItemId)&&void 0!==y?y:"",et=C.getGoogleSheetUrl(ee,J?"".concat(J):null),ea=(0,k.D)({meta:{errorMessage:"An error occurred while saving data configuration"},mutationFn:e=>j.Z.saveDataConfiguration(e)}),er=(0,k.D)({meta:{errorMessage:"An error occurred while deleting data configuration"},mutationFn:e=>j.Z.deleteDataConfiguration(e)}),en=(0,k.D)({meta:{errorMessage:"An error occurred while updating data configuration"},mutationFn:e=>j.Z.updateDataConfiguration(e)}),es=(0,N.TA)({enableReinitialize:!0,initialValues:{configName:null!==(v=null==H?void 0:H.name)&&void 0!==v?v:"",action:(null==H?void 0:H.overwriteRows)?"overwrite":"append",columnMappings:null!==(b=null==H?void 0:H.columnMappings)&&void 0!==b?b:{},headerRowsToSkip:null!==(x=null==H?void 0:H.headerRowsToSkip)&&void 0!==x?x:1,destinationType:null!==(O=null==H?void 0:H.destinationType)&&void 0!==O?O:"Folder",googleDriveItemId:null!==(q=null==H?void 0:H.googleDriveItemId)&&void 0!==q?q:"",reportType:null!==(E=null==H?void 0:H.reportType)&&void 0!==E?E:V},onSubmit:(e,t)=>{let{columnMappings:a,configName:r,headerRowsToSkip:n,action:s,destinationType:i,googleDriveItemId:o}=e;if(H)en.mutate({configId:H.id,name:r,columnMappings:a,destinationType:i,googleDriveItemId:o,headerRowsToSkip:n,reportType:V,overwriteRows:"overwrite"===s},{onSuccess:e=>{null==L||L(),Z(),t.setSubmitting(!1),"Sheet"===e.destinationType?(Q.setValues(t=>{var a;return{...t,columnMappings:e.columnMappings,headerRowsToSkip:null!==(a=e.headerRowsToSkip)&&void 0!==a?a:1,dataConfigurationId:e.id,menuItemDestination:e.name}}),W.mutate()):Q.setFieldValue("menuItemDestination",e.name),(0,w.yv)("Data configuration updated successfully",{variant:"success"}),es.resetForm()}});else{if(!X)throw Error("Google Drive item is not selected");ea.mutate({columnMappings:a,destinationType:"Sheet",name:r,headerRowsToSkip:n,sheet:Q.values.googleSheetSheet,overwriteRows:"overwrite"===s,googleDriveItemId:X.id,reportType:V},{onSuccess:e=>{Z(),t.setSubmitting(!1),Q.setValues(t=>{var a,r;return{...t,columnMappings:null!==(a=e.columnMappings)&&void 0!==a?a:void 0,headerRowsToSkip:null!==(r=e.headerRowsToSkip)&&void 0!==r?r:void 0,dataConfigurationId:e.id}}),(0,w.yv)("Data configuration saved successfully",{variant:"success"}),es.resetForm()}})}},validateOnMount:!0,validationSchema:U.Ry().shape({configName:U.Z_().min(3,"Configuration name must be at least 3 characters").required("Configuration name is required"),...(null==H?void 0:H.destinationType)!=="Sheet"&&H?{}:{action:U.Z_().oneOf(["overwrite","append"]).required("Action is required"),columnMappings:U.Ry().test("notEmpty","At least one mapping must be selected",e=>e&&Object.keys(e).length>0).required("Mappings are required"),headerRowsToSkip:U.Rx().min(1,"Number of rows to skip must be at least 1").max(10,"Number of rows to skip must be at most 10").required("Number of header rows to skip is required")}})}),ei=(0,m.useCallback)(()=>{H||Q.setFieldValue("googleSheetSheet",null),es.resetForm(),Z()},[H,es,Z,Q]),eo=[{disabled:ea.isPending,onClick:ei,text:"Cancel",variant:"outlined"}];H&&eo.push({loading:er.isPending,onClick:()=>{z({onApprove:()=>er.mutate({dataConfigurationId:H.id},{onSuccess:()=>{Q.setValues(e=>({...e,dataConfigurationId:"",menuItemDestination:"Local",downloadDestinationType:"Local",googleSheetSheet:void 0})),(0,w.yv)("Data configuration deleted successfully",{variant:"success"}),ei()}}),text:"Are you sure you want to delete this data configuration?"})},text:"Delete",variant:"contained",color:"error"}),eo.push({disabled:!es.isValid||!es.dirty,isEnterAction:!0,loading:ea.isPending||en.isPending,onClick:es.handleSubmit,text:H?"Update":"Save",variant:"contained"});let el=(0,m.useMemo)(()=>new Set(Object.values(es.values.columnMappings)),[es.values.columnMappings]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Eu,{open:W.isPending,"data-sentry-element":"BackdropLoader","data-sentry-source-file":"DataConfigurationModal.tsx"}),(0,r.jsx)(M.u_,{actions:eo,maxWidth:"lg",onClose:()=>{Z(),es.resetForm()},open:Y,title:"Data Destination Settings","data-sentry-element":"Modal","data-sentry-source-file":"DataConfigurationModal.tsx",children:(0,r.jsxs)(n.Z,{spacing:2,"data-sentry-element":"Stack","data-sentry-source-file":"DataConfigurationModal.tsx",children:[(0,r.jsx)(n.Z,{"data-sentry-element":"Stack","data-sentry-source-file":"DataConfigurationModal.tsx",children:(0,r.jsx)(c.Z,{autoFocus:!0,error:!!(es.errors.configName&&es.touched.configName),fullWidth:!0,helperText:es.touched.configName?es.errors.configName:null,id:"configName",label:"Configuration Name",name:"configName",onBlur:es.handleBlur,onChange:es.handleChange,value:es.values.configName,"data-sentry-element":"TextField","data-sentry-source-file":"DataConfigurationModal.tsx"})}),(null==H?void 0:H.destinationType)==="Folder"?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{children:(0,r.jsx)(B.Z,{children:(0,r.jsxs)(P.Z,{defaultValue:(null==H?void 0:H.overwriteRows)?"overwrite":"append",name:"radio-buttons-group",onChange:e=>es.setFieldValue("action",e.target.value),children:[(0,r.jsx)(D.Z,{control:(0,r.jsx)(I.Z,{}),label:"Clear data before writing (retains column headers)",value:"overwrite"},"overwrite"),(0,r.jsx)(D.Z,{control:(0,r.jsx)(I.Z,{}),label:"Add to existing data on first available empty row",value:"append"},"append")]})})}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(c.Z,{error:!!(es.errors.headerRowsToSkip&&es.touched.headerRowsToSkip),fullWidth:!0,helperText:es.touched.headerRowsToSkip?es.errors.headerRowsToSkip:null,id:"headerRowsToSkip",label:"Header rows to skip (between 1 and 10)",name:"headerRowsToSkip",onBlur:es.handleBlur,onChange:e=>{var t;let a=null!==(t=parseInt(e.target.value,10))&&void 0!==t?t:1;a>=1&&a<=10&&(Q.setFieldValue("headerRowsToSkip",a),W.mutate()),es.handleChange(e)},type:"number",value:es.values.headerRowsToSkip}),(0,r.jsx)(i.Z,{color:"text.secondary",variant:"caption",children:"Enter the number of rows of column headers in your sheet"})]}),(0,r.jsxs)(n.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(i.Z,{variant:"h6",children:"Destination Column Mapping"}),(0,r.jsxs)(n.Z,{direction:"row",children:[(0,r.jsx)(o.Z,{title:"Go to Sheet",children:(0,r.jsx)(l.Z,{component:F(),href:et,rel:"noreferrer",target:"_blank",children:(0,r.jsx)(g.I,{icon:"eva:external-link-fill"})})}),(0,r.jsx)(o.Z,{title:"Refetch column headers",children:(0,r.jsx)(l.Z,{disabled:W.isPending,onClick:()=>{es.setFieldValue("columnMappings",{}),W.mutate()},children:(0,r.jsx)(g.I,{icon:"eva:refresh-fill"})})})]})]}),W.isPending?(0,r.jsx)(s.Z,{margin:"auto",children:(0,r.jsx)(S.Z,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(i.Z,{variant:"subtitle2",children:"Column Headers"}),(0,r.jsx)(i.Z,{variant:"subtitle2",children:"Data fields"})]}),(null==W?void 0:null===(u=W.data)||void 0===u?void 0:null===(d=u.columnHeaders)||void 0===d?void 0:d.length)?null==W?void 0:null===(h=W.data)||void 0===h?void 0:null===(p=h.columnHeaders)||void 0===p?void 0:p.map(e=>{var t;return(0,r.jsxs)(n.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,r.jsxs)(n.Z,{flex:"2",children:[(0,r.jsx)(i.Z,{borderRadius:1,color:"inherit",variant:"body2",width:"fit-content",children:e.name}),(0,r.jsxs)(i.Z,{color:"text.secondary",variant:"caption",children:["Column ",e.column]})]}),(0,r.jsx)(n.Z,{alignItems:"center",direction:"row",flex:"1",children:(0,r.jsx)(g.I,{icon:"eva:arrow-forward-fill"})}),(0,r.jsx)(n.Z,{flex:"3",children:(0,r.jsx)(T.Z,{autoComplete:!0,filterSelectedOptions:!0,fullWidth:!0,getOptionLabel:e=>e.value,isOptionEqualToValue:(e,t)=>e.value===t.value,noOptionsText:(0,r.jsx)(R,{message:"No data fields found"}),onChange:(t,a)=>{if(a)es.setFieldValue("columnMappings",{...es.values.columnMappings,[e.column]:a.key});else{let t={...es.values.columnMappings};delete t[e.column],es.setFieldValue("columnMappings",t)}},options:$,renderInput:e=>(0,r.jsx)(c.Z,{error:!!(es.errors.columnMappings&&es.touched.columnMappings),onBlur:es.handleBlur,...e,fullWidth:!0,label:"Choose a field",sx:{minWidth:300}}),renderOption:(e,t)=>(0,m.createElement)("li",{...e,key:t.key,style:{width:"100%"}},(0,r.jsx)(i.Z,{color:el.has(t.key)?"text.secondary":void 0,variant:"body2",children:t.value})),value:null!==(t=$.find(t=>t.key===es.values.columnMappings[e.column]))&&void 0!==t?t:null})})]},e.column)}):(0,r.jsx)(i.Z,{align:"center",variant:"body2",children:"No column headers found"})]})]})]})})]})},Y=()=>(0,r.jsx)(s.Z,{sx:x,"data-sentry-element":"Box","data-sentry-component":"AutocompleteLoader","data-sentry-source-file":"AutocompleteLoader.tsx",children:(0,r.jsx)(S.Z,{"data-sentry-element":"CircularProgress","data-sentry-source-file":"AutocompleteLoader.tsx"})}),Q=a(77837),H=a.n(Q),W=e=>{let{inViewRef:t,disabled:a,loading:n,formik:i,setSearchTerm:o,options:d,reportType:u,isLoadingNextPage:p}=e,h=()=>"Google Sheet"===i.values.downloadDestinationType?"Choose a Google Sheet to write to":"Select a destination folder to upload data";return(0,r.jsx)(T.Z,{autoComplete:!0,autoHighlight:!0,clearOnEscape:!0,disabled:a,filterOptions:e=>e,fullWidth:!0,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,t)=>e.id===t.id,loading:n,loadingText:(0,r.jsx)(Y,{}),noOptionsText:(0,r.jsx)(R,{message:"No items found"}),onChange:(e,t)=>{i.setValues(e=>({...e,googleDriveItem:null!=t?t:void 0,reportType:u,googleSheetSheet:"Google Sheet"===i.values.downloadDestinationType?void 0:e.googleSheetSheet}))},onInputChange:H()((e,t)=>{if(!t||(null==e?void 0:e.type)!=="click"){if(C.isUrl(t)){let e=C.isGoogleDriveFolderUrl(t),a=C.isGoogleSheetUrl(t),r="Google Drive"===i.values.downloadDestinationType,n="Google Sheet"===i.values.downloadDestinationType;r&&!e?((0,w.yv)("Please enter a valid Google Drive folder URL",{variant:"error"}),o("")):n&&!a?((0,w.yv)("Please enter a valid Google Sheet URL",{variant:"error"}),o("")):o(t)}else o(t)}},300),openOnFocus:!0,options:d,renderInput:e=>(0,r.jsx)(c.Z,{...e,fullWidth:!0,InputProps:{...e.InputProps,endAdornment:(0,r.jsxs)(r.Fragment,{children:[p?(0,r.jsx)(S.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})},label:h()}),renderOption:(e,a,n)=>{let{index:o}=n,c=o===d.length-3;return(0,m.createElement)("li",{...e,key:a.id,ref:c?t:null,style:{width:"100%"}},(0,r.jsxs)(s.Z,{alignItems:"center",display:"flex",justifyContent:"space-between",sx:{pr:2,width:"100%"},children:[(0,r.jsxs)(s.Z,{alignItems:"center",display:"flex",gap:1,children:[(0,r.jsx)(g.I,{icon:"Google Drive"===i.values.downloadDestinationType?"eva:folder-fill":"eva:file-text-outline",width:20}),a.name]}),(0,r.jsx)(l.Z,{component:F(),href:C.getGoogleDriveItemLink(a.id,i.values.downloadDestinationType),rel:"noreferrer",target:"_blank",children:(0,r.jsx)(g.I,{icon:"eva:external-link-fill",sx:{color:"text.secondary"}})})]}))},"data-sentry-element":"Autocomplete","data-sentry-component":"GoogleDriveItemSelector","data-sentry-source-file":"GoogleDriveItemSelector.tsx"})};function K(e){let{googleDriveItemId:t,googleSheetSheetTitle:a,headerRowsToSkip:r,dataConfigurationId:n}=e;return(0,k.D)({meta:{errorMessage:"Failed to get Google Sheet column headers"},mutationFn:()=>j.Z.getSheetColumnHeaders({spreadsheetId:t,sheetTitle:a,dataConfigurationId:n,headerRowsToSkip:r})})}var z=e=>{var t,a,n,i;let{disabled:o,loading:l,isLoadingNextPage:d,formik:u,options:p,reportType:h,selectedColumns:f}=e,A=(0,_.k)(),y=K({googleDriveItemId:null===(t=u.values.googleDriveItem)||void 0===t?void 0:t.id,googleSheetSheetTitle:null===(a=u.values.googleSheetSheet)||void 0===a?void 0:a.title,dataConfigurationId:u.values.dataConfigurationId,headerRowsToSkip:null!==(n=u.values.headerRowsToSkip)&&void 0!==n?n:1});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{getSheetColumnHeadersMutation:y,onClose:A.onFalse,open:A.value,reportFormik:u,reportType:h,selectedColumns:f,"data-sentry-element":"DataConfigurationModal","data-sentry-source-file":"GoogleSheetSelector.tsx"}),(0,r.jsx)(T.Z,{autoComplete:!0,autoHighlight:!0,disabled:o,fullWidth:!0,getOptionLabel:e=>e.title,isOptionEqualToValue:(e,t)=>e.id===t.id,loading:l,loadingText:(0,r.jsx)(Y,{}),noOptionsText:(0,r.jsx)(R,{message:"No sheets found"}),onChange:(e,t)=>{t?(u.setFieldValue("googleSheetSheet",t),y.mutate(),A.onTrue()):u.setFieldValue("googleSheetSheet",null)},openOnFocus:!0,options:p,renderInput:e=>(0,r.jsx)(c.Z,{...e,fullWidth:!0,InputProps:{...e.InputProps,endAdornment:(0,r.jsxs)(r.Fragment,{children:[d?(0,r.jsx)(S.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})},label:"Sheet name"}),renderOption:(e,t)=>p.find(e=>e.id===t.id)?(0,m.createElement)("li",{...e,key:t.id,style:{width:"100%"}},(0,r.jsx)(s.Z,{alignItems:"center",display:"flex",justifyContent:"space-between",sx:{pr:2,width:"100%"},children:(0,r.jsxs)(s.Z,{alignItems:"center",display:"flex",gap:1,children:[(0,r.jsx)(g.I,{icon:"eva:file-outline",width:20}),t.title]})})):null,value:null!==(i=p.find(e=>{var t;return e.id===(null===(t=u.values.googleSheetSheet)||void 0===t?void 0:t.id)}))&&void 0!==i?i:null,"data-sentry-element":"Autocomplete","data-sentry-source-file":"GoogleSheetSelector.tsx"})]})},$=a(27141),J=a(57175);let X=e=>({"Google Drive":"Upload data to Google Drive folder","Google Sheet":"Write data to Google Sheet",Local:"Save CSV file to computer"})[e];var ee=e=>{var t,a,B;let{disabled:P,formik:D,reportType:I,selectedColumns:T}=e,[w,b]=(0,m.useState)(""),[x,R]=(0,m.useState)(null),k=(0,A.v9)(y.Z.googleDriveConnectionSelector),N="Google Sheet"===D.values.downloadDestinationType?"Spreadsheet":"Folder",O=(0,_.k)(),{driveOptions:F,isFetchingNextDrivePage:U,fetchNextDrivePage:q,isRefetchingDrive:E,isDrivePending:Z}=function(e){var t;let{disabled:a,formik:r,searchTerm:n,googleDriveItemType:s}=e,{data:i,isFetchingNextPage:o,fetchNextPage:l,isRefetching:d,isPending:c}=(0,$.N)({enabled:!a&&!r.values.isSavingToPreviousDestination&&"Local"!==r.values.downloadDestinationType,queryFn:async e=>{let{pageParam:t}=e;return j.Z.fetchGoogleDriveItems({pageSize:20,pageToken:t,searchTerm:n,itemType:s})},initialPageParam:"",getNextPageParam:e=>{if(e.nextPageToken)return e.nextPageToken},queryKey:["fetchGoogleDriveItems",s,n]});return{driveOptions:null!==(t=null==i?void 0:i.pages.flatMap(e=>e.items))&&void 0!==t?t:[],isFetchingNextDrivePage:o,fetchNextDrivePage:l,isRefetchingDrive:d,isDrivePending:c}}({disabled:P,formik:D,googleDriveItemType:N,searchTerm:w}),{ref:L}=(0,f.YD)({onChange(e){k&&!Z&&e&&q()}}),{data:G,isPending:Y}=function(e){let{disabled:t,formik:a}=e,{googleDriveItem:r,downloadDestinationType:n}=a.values;return(0,J.a)({enabled:!t&&"Google Sheet"===n&&!!r,queryFn:()=>j.Z.fetchSheetsInGoogleSheet({spreadsheetId:r.id}),queryKey:["fetchGoogleSheetSheets",n,r]})}({disabled:P,formik:D}),Q=null!==(a=null==G?void 0:G.sheets)&&void 0!==a?a:[],{previousDestinations:H,isPreviousDestinationPending:ee,fetchNextDestinations:et,refetchPreviousDestinations:ea}=function(e){var t;let{disabled:a,formik:r,reportType:n,googleDriveConnection:s}=e,{data:i,isPending:o,fetchNextPage:l,refetch:d}=(0,$.N)({enabled:!a&&!!s,queryFn:async e=>{let{pageParam:t}=e;return j.Z.getGoogleDriveDataConfigurations({offset:t,reportType:n})},initialPageParam:0,meta:{errorMessage:"An error occurred while fetching previous destinations"},getNextPageParam:M.kg.getArrayInfiniteQueryParams,queryKey:["fetchPreviousDestinations",r.values.dataConfigurationId,n,s]});return{previousDestinations:null!==(t=null==i?void 0:i.pages.flat())&&void 0!==t?t:[],isPreviousDestinationPending:o,fetchNextDestinations:l,refetchPreviousDestinations:d}}({disabled:P,formik:D,reportType:I,googleDriveConnection:k}),{ref:er}=(0,f.YD)({onChange(e){e&&et()}}),en=K({googleDriveItemId:null==x?void 0:x.googleDriveItemId,googleSheetSheetTitle:null==x?void 0:null===(t=x.sheet)||void 0===t?void 0:t.title,dataConfigurationId:D.values.dataConfigurationId,headerRowsToSkip:null!==(B=D.values.headerRowsToSkip)&&void 0!==B?B:1}),es=e=>()=>{e&&(R(e),D.setValues(t=>{var a,r,n;return{...t,headerRowsToSkip:null!==(a=e.headerRowsToSkip)&&void 0!==a?a:void 0,isSavingToPreviousDestination:!0,downloadDestinationType:"Folder"===e.destinationType?"Google Drive":"Google Sheet",googleDriveItem:{id:e.googleDriveItemId,name:e.name},dataConfigurationId:e.id,columnMappings:null!==(r=e.columnMappings)&&void 0!==r?r:void 0,googleSheetSheet:null!==(n=e.sheet)&&void 0!==n?n:void 0,menuItemDestination:e.name}}),O.onTrue())},ei=e=>{let{value:t,downloadDestinationType:a,link:c,clickHandler:u}=e;return(0,r.jsxs)(n.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",width:"100%","data-sentry-element":"Stack","data-sentry-component":"renderMenuItemValue","data-sentry-source-file":"DataDestinationPicker.tsx",children:[(0,r.jsxs)(s.Z,{alignItems:"center",display:"flex",gap:1,"data-sentry-element":"Box","data-sentry-source-file":"DataDestinationPicker.tsx",children:[(0,r.jsx)(g.I,{icon:"Google Drive"===a?"eva:folder-fill":"eva:file-text-outline",width:20,"data-sentry-element":"Iconify","data-sentry-source-file":"DataDestinationPicker.tsx"}),(0,r.jsx)(i.Z,{variant:"body2","data-sentry-element":"Typography","data-sentry-source-file":"DataDestinationPicker.tsx",children:String(t)})]}),(0,r.jsxs)(s.Z,{"data-sentry-element":"Box","data-sentry-source-file":"DataDestinationPicker.tsx",children:[(0,r.jsx)(o.Z,{title:"Edit","data-sentry-element":"Tooltip","data-sentry-source-file":"DataDestinationPicker.tsx",children:(0,r.jsx)(l.Z,{onClick:e=>e.stopPropagation(),onKeyUp:e=>e.stopPropagation(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),u(),en.mutate()},"data-sentry-element":"IconButton","data-sentry-source-file":"DataDestinationPicker.tsx",children:(0,r.jsx)(g.I,{icon:"eva:edit-2-outline",sx:{color:"text.secondary"},"data-sentry-element":"Iconify","data-sentry-source-file":"DataDestinationPicker.tsx"})})}),(0,r.jsx)(o.Z,{title:"Open ".concat(a),"data-sentry-element":"Tooltip","data-sentry-source-file":"DataDestinationPicker.tsx",children:(0,r.jsx)(l.Z,{component:d.Z,href:c,onClick:e=>e.stopPropagation(),onKeyUp:e=>e.stopPropagation(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},rel:"noreferrer",target:"_blank","data-sentry-element":"IconButton","data-sentry-source-file":"DataDestinationPicker.tsx",children:(0,r.jsx)(g.I,{icon:"eva:external-link-fill",sx:{color:"text.secondary"},"data-sentry-element":"Iconify","data-sentry-source-file":"DataDestinationPicker.tsx"})})})]})]})},eo=["Local","Google Drive","Google Sheet"];return(0,r.jsxs)(n.Z,{ref:L,spacing:2,"data-sentry-element":"Stack","data-sentry-component":"DataDestinationPicker","data-sentry-source-file":"DataDestinationPicker.tsx",children:[(0,r.jsxs)(c.Z,{ref:er,disabled:P,fullWidth:!0,label:"Choose data destination",name:"menuItemDestination",onChange:e=>(eo.includes(e.target.value)&&D.setFieldValue("googleDriveItem",null),D.handleChange(e)),select:!0,SelectProps:{renderValue:e=>{var t,a,r,n,s;return X(e)||ei({value:e,downloadDestinationType:D.values.downloadDestinationType,link:C.getGoogleDriveItemLink(null!==(s=null===(t=D.values.googleDriveItem)||void 0===t?void 0:t.id)&&void 0!==s?s:"",D.values.downloadDestinationType,(null===(a=D.values.googleSheetSheet)||void 0===a?void 0:a.id)?"".concat(null===(n=D.values)||void 0===n?void 0:null===(r=n.googleSheetSheet)||void 0===r?void 0:r.id):null),clickHandler:O.onTrue})},MenuProps:{PaperProps:{style:{maxHeight:200}}}},value:D.values.menuItemDestination,"data-sentry-element":"TextField","data-sentry-source-file":"DataDestinationPicker.tsx",children:[eo.map(e=>{let t=!P&&"Local"!==e&&!k;return(0,r.jsx)(v,{disabled:t,onClick:()=>{D.setValues(t=>({...t,downloadDestinationType:e,isSavingToPreviousDestination:!1}))},tooltipText:"In order to push data to Google Drive, you must first connect a Google Drive account on the Integrations Page",value:e,children:X(e)},e)}),(0,r.jsx)(u.Z,{sx:{my:1},"data-sentry-element":"Divider","data-sentry-source-file":"DataDestinationPicker.tsx"}),(0,r.jsx)(p.Z,{"data-sentry-element":"ListSubheader","data-sentry-source-file":"DataDestinationPicker.tsx",children:"Previous Destinations"}),(0,r.jsx)(s.Z,{alignItems:"center",display:"flex",justifyContent:"center","data-sentry-element":"Box","data-sentry-source-file":"DataDestinationPicker.tsx",children:ee?(0,r.jsx)(S.Z,{size:20}):null}),ee||0===H.length?(0,r.jsx)(h.Z,{disabled:!0,children:"No previous destinations"}):H.map((e,t)=>{var a,n;return(0,r.jsx)(h.Z,{ref:t===H.length-1?er:null,onClick:()=>{R(e),D.setValues(t=>{var a,r,n;return{...t,headerRowsToSkip:null!==(a=e.headerRowsToSkip)&&void 0!==a?a:void 0,isSavingToPreviousDestination:!0,downloadDestinationType:"Folder"===e.destinationType?"Google Drive":"Google Sheet",googleDriveItem:{id:e.googleDriveItemId,name:e.name},dataConfigurationId:e.id,columnMappings:null!==(r=e.columnMappings)&&void 0!==r?r:void 0,googleSheetSheet:null!==(n=e.sheet)&&void 0!==n?n:void 0}})},sx:{pr:2,width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},value:e.name,children:ei({value:e.name,downloadDestinationType:"Folder"===e.destinationType?"Google Drive":"Google Sheet",link:C.getGoogleDriveItemLink(e.googleDriveItemId,"Folder"===e.destinationType?"Google Drive":"Google Sheet",(null==e?void 0:null===(a=e.sheet)||void 0===a?void 0:a.id)?"".concat(null==e?void 0:null===(n=e.sheet)||void 0===n?void 0:n.id):null),clickHandler:es(e)})},e.id)})]}),D.values.isSavingToPreviousDestination||"Local"===D.values.menuItemDestination?null:(0,r.jsx)(W,{disabled:P,formik:D,inViewRef:L,isLoadingNextPage:U,loading:Z||E,options:F,reportType:I,setSearchTerm:b},D.values.menuItemDestination),D.values.googleDriveItem&&"Google Sheet"===D.values.menuItemDestination?(0,r.jsx)(z,{disabled:P,formik:D,isLoadingNextPage:U,loading:Y,options:Q,reportType:I,selectedColumns:T},D.values.googleDriveItem.id):null,(0,r.jsx)(V,{editConfigurationDetails:x,getSheetColumnHeadersMutation:en,onClose:O.onFalse,onUpdate:ea,open:!!x&&O.value,reportFormik:D,reportType:I,selectedColumns:T,"data-sentry-element":"DataConfigurationModal","data-sentry-source-file":"DataDestinationPicker.tsx"})]})}},11330:function(e,t,a){"use strict";var r=a(31549),n=a(27308),s=a(63552),i=a(91617),o=a(49482);t.Z=e=>{let{metadataStatus:t,fetchMetadata:a}=e;return"error"===t?(0,r.jsx)(n.Z,{action:(0,r.jsx)(s.Z,{title:"Reconnect",children:(0,r.jsx)(i.Z,{color:"inherit",onClick:a,children:(0,r.jsx)(o.I,{icon:"mdi:reload"})})}),severity:"warning",sx:{mb:1},children:"No active session found. Please login to Seller Central."}):null}},78839:function(e,t,a){"use strict";var r=a(31549),n=a(92103),s=a(94201),i=a(65027),o=a(73207),l=a(63552),d=a(91617),c=a(64616),u=a(45534),p=a(49482),S=a(40432);a(44194),t.Z=e=>{let{title:t,tutorialUrl:a,children:h}=e,g=(0,S.useRouter)();return(0,r.jsx)(n.Z,{display:"flex",justifyContent:"center",margin:"auto","data-sentry-element":"Box","data-sentry-component":"ReportFormContainer","data-sentry-source-file":"ReportFormContainer.tsx",children:(0,r.jsxs)(s.Z,{sx:{maxWidth:600,width:"100%"},"data-sentry-element":"Card","data-sentry-source-file":"ReportFormContainer.tsx",children:[(0,r.jsx)(i.Z,{sx:{p:2},title:(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[(0,r.jsxs)(o.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,r.jsx)(l.Z,{title:"Go back",children:(0,r.jsx)(d.Z,{onClick:g.back,children:(0,r.jsx)(p.I,{icon:"eva:arrow-back-fill"})})}),t]}),a?(0,r.jsx)(c.Z,{color:"inherit",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),startIcon:(0,r.jsx)(p.I,{icon:"eva:video-fill"}),children:"Tutorial"}):null]}),"data-sentry-element":"CardHeader","data-sentry-source-file":"ReportFormContainer.tsx"}),(0,r.jsx)(u.Z,{"data-sentry-element":"CardContent","data-sentry-source-file":"ReportFormContainer.tsx",children:h})]})})}},19034:function(e,t,a){"use strict";var r=a(31549),n=a(92103),s=a(45576),i=a(73207),o=a(65810);t.Z=e=>{let{progress:t=0,label:a}=e;return(0,r.jsxs)(n.Z,{"data-sentry-element":"Box","data-sentry-component":"ReportProgressBar","data-sentry-source-file":"ReportProgressBar.tsx",children:[(0,r.jsx)(s.Z,{variant:"body2","data-sentry-element":"Typography","data-sentry-source-file":"ReportProgressBar.tsx",children:a}),(0,r.jsxs)(i.Z,{alignItems:"center",direction:"row",spacing:1,"data-sentry-element":"Stack","data-sentry-source-file":"ReportProgressBar.tsx",children:[(0,r.jsx)(n.Z,{sx:{mr:1,width:"100%"},"data-sentry-element":"Box","data-sentry-source-file":"ReportProgressBar.tsx",children:(0,r.jsx)(o.Z,{value:t,variant:"determinate","data-sentry-element":"LinearProgress","data-sentry-source-file":"ReportProgressBar.tsx"})}),(0,r.jsx)(n.Z,{sx:{minWidth:35},"data-sentry-element":"Box","data-sentry-source-file":"ReportProgressBar.tsx",children:(0,r.jsxs)(s.Z,{color:"text.secondary",variant:"body2","data-sentry-element":"Typography","data-sentry-source-file":"ReportProgressBar.tsx",children:[Math.floor(t),"%"]})})]})]})}},7597:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var r=a(31549),n=a(13175),s=a(92027),i=a(4821),o=a(44194),l=a(45304),d=a(24643),c=a(33759),u=a(73207),p=a(63552),S=a(91617),h=a(49482),g=e=>{let{snackbarKey:t,openLinkUrl:a}=e;return(0,r.jsxs)(u.Z,{alignItems:"center",direction:"row",spacing:.5,"data-sentry-element":"Stack","data-sentry-component":"ReportSnackbarActions","data-sentry-source-file":"ReportSnackbarActions.tsx",children:[(0,r.jsx)(p.Z,{title:"Open Google Sheet","data-sentry-element":"Tooltip","data-sentry-source-file":"ReportSnackbarActions.tsx",children:(0,r.jsx)(S.Z,{color:"inherit",onClick:()=>{chrome.tabs.create({url:a}),(0,n.sy)(t)},"data-sentry-element":"IconButton","data-sentry-source-file":"ReportSnackbarActions.tsx",children:(0,r.jsx)(h.I,{icon:"eva:external-link-fill",sx:{color:"text.secondary"},"data-sentry-element":"Iconify","data-sentry-source-file":"ReportSnackbarActions.tsx"})})}),(0,r.jsx)(S.Z,{onClick:()=>(0,n.sy)(t),size:"small","data-sentry-element":"IconButton","data-sentry-source-file":"ReportSnackbarActions.tsx",children:(0,r.jsx)(h.I,{icon:"mingcute:close-line",width:16,"data-sentry-element":"Iconify","data-sentry-source-file":"ReportSnackbarActions.tsx"})})]})};function _(e,t){let[a,u]=(0,o.useState)(null),[p,S]=(0,o.useState)(null),[h,_]=(0,o.useState)(t),m=(0,l.v9)(d.Z.googleDriveConnectionSelector),[f,A]=(0,o.useState)("idle"),y=(0,l.v9)(d.Z.activeMarketplaceSelector),C=e=>{let{loaded:t,total:a}=e;a&&S(Math.round(100*t/a))},v="view-drive-link",B=(0,i.D)({meta:{errorMessage:"An error occurred while uploading report data to Google Drive"},mutationFn:e=>c.Z.uploadDataToGoogleDrive(e,C),onSuccess:e=>{let{googleDriveFolderUrl:t}=e;(0,n.yv)("Successfully uploaded data to Google Drive",{action:(0,r.jsx)(g,{openLinkUrl:t,snackbarKey:v}),persist:!0,key:v,variant:"success"})}}),P="view-sheet-link",D=(0,i.D)({meta:{errorMessage:"An error occurred while uploading report data to Google Sheet"},mutationFn:e=>c.Z.writeReportDataToSheet(e,C),onSuccess:e=>{let{googleSheetUrl:t}=e;(0,n.yv)("Successfully uploaded data to Google Sheet",{action:(0,r.jsx)(g,{openLinkUrl:t,snackbarKey:P}),persist:!0,key:P,variant:"success"})}}),I=(e,t)=>{let a={};return Object.entries(t).forEach(t=>{let[r,n]=t;e.forEach(e=>{let t=e[n];a[r]?a[r].push(t):a[r]=[t]})}),a},T=(0,o.useCallback)(async()=>{if(y){A("loading");try{_(await e(y)),A("success")}catch(e){A("error"),e instanceof s.iQ&&"ERR_NETWORK"!==e.rawCode&&e.statusCode!==s.MS.Forbidden&&(0,n.yv)(e.message,{variant:"error"})}}},[y,e]);return(0,o.useEffect)(()=>{T()},[T]),{downloadReport:e=>{let{csvText:t,csvData:a,sheetDataToWriteToDrive:r,fileName:s,destination:i,reportFormData:o}=e;if(!t&&!(null==a?void 0:a.length)&&!(null==r?void 0:r.length))throw Error("No data to download");let{googleDriveItem:l,reportType:d,dataConfigurationId:c}=o;if(t){if("Local"!==i)throw Error("Unexpected destination type: ".concat(i));let e=new Blob([t],{type:"text/csv"}),a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download="".concat(s,".csv"),a.click(),(0,n.yv)("Successfully downloaded all report data",{variant:"success"})}else if(r){if(!m)throw Error("No Google Drive integration found");if(!l)throw Error("No Google Drive folder selected");B.mutate({fileName:s,dataToWrite:r,driveFolderId:l.id,driveFolderName:l.name,reportType:d,dataConfigurationId:c})}else if(a&&"Google Sheet"===i){let{googleSheetSheet:e,columnMappings:t}=o;if(!t||!c)throw Error("No column mappings found");if(!e||!l)throw Error("No Google Sheet sheet selected");D.mutate({mappingsToWrite:I(a,t),dataConfigurationId:c,sheet:e,spreadsheetId:l.id})}},setUploadProgress:S,setDownloadProgress:u,loadingDetails:(0,o.useMemo)(()=>{let e=D.isPending,t=B.isPending;return Number.isFinite(a)?{label:"Downloading report data...",progress:null!=a?a:0}:t?{label:"Uploading report data to Google Drive...",progress:null!=p?p:0}:e?{label:"Writing report data to Google Sheet...",progress:null!=p?p:0}:null},[a,B.isPending,D.isPending,p]),fetchMetadata:T,metadata:h,metadataStatus:f}}},29426:function(e,t,a){"use strict";a.d(t,{Eu:function(){return r.Eu},kg:function(){return y},rU:function(){return r.rU},u_:function(){return r.u_},HW:function(){return n.H}});var r=a(84790),n=a(34094);a(31549);var s=a(13175);a(44194),a(29859);var i=a(31791),o=a(22470),l=a(25822),d=a(53226),c=a(60427),u=a(98627),p=a(88294),S=a(17883),h=a(17613),g=a.n(h);function _(){let e=(0,i._)(["lower(",")"]);return _=function(){return e},e}class m{static createDrizzleFilter(e,t){let{items:a,logicOperator:r=o.G.And}=t,n=[];if(a.filter(e=>{let{value:t}=e;return void 0!==t}).forEach(t=>{let{field:a,operator:r,value:s}=t;if(e[a])switch(r){case"contains":n.push((0,u.o$)(e[a],"%".concat(s,"%")));break;case"doesNotContain":n.push((0,u.mM)(e[a],"%".concat(s,"%")));break;case"startsWith":n.push((0,u.o$)(e[a],"".concat(s,"%")));break;case"endsWith":n.push((0,u.o$)(e[a],"%".concat(s)));break;case"equals":n.push((0,u.o$)(e[a],s));break;case"is":n.push((0,u.eq)(e[a],s));break;case"not":n.push((0,u.ff)((0,u.eq)(e[a],s)));break;case"isAnyOf":s.length&&n.push((0,u.d3)(e[a],s));break;case"after":n.push((0,u.gt)(e[a],g()(s).endOf("day").toISOString()));break;case"onOrAfter":n.push((0,u.eg)(e[a],g()(s).endOf("day").toISOString()));break;case"before":n.push((0,u.lt)(e[a],g()(s).startOf("day").toISOString()));break;case"onOrBefore":n.push((0,u.G)(e[a],g()(s).startOf("day").toISOString()));break;case"=":n.push((0,u.eq)(e[a],Number.isFinite(+s)?+s:void 0));break;case"!=":n.push((0,u.ff)((0,u.eq)(e[a],Number.isFinite(+s)?+s:void 0)));break;case">":n.push((0,u.gt)(e[a],Number.isFinite(+s)?+s:void 0));break;case">=":n.push((0,u.eg)(e[a],Number.isFinite(+s)?+s:void 0));break;case"<":n.push((0,u.lt)(e[a],Number.isFinite(+s)?+s:void 0));break;case"<=":n.push((0,u.G)(e[a],Number.isFinite(+s)?+s:void 0))}}),n.length)return r===o.G.And?(0,u.xD)(...n):(0,u.or)(...n)}static createDrizzleSort(e,t){return t.filter(e=>{let{sort:t}=e;return t}).map(t=>{let{field:a,sort:r}=t,n="string"===e[a].columnType?(0,p.i6)(_(),e[a]):e[a];return"asc"===r?(0,S.d)(n):(0,S.C)(n)})}static createCustomSingleSelectFilter(e,t,a,r){if(!e.length)return;let n=[];return e.forEach(e=>{if(e.value)switch(e.operator){case"is":n.push(r(e.value));break;case"not":n.push((0,u.or)(...a.filter(t=>t!==e.value).map(e=>r(e))));break;case"isAnyOf":n.push((0,u.or)(...(e.value||[]).map(e=>r(e))))}}),t===o.G.And?(0,u.xD)(...n):(0,u.or)(...n)}}m.STRING_FILTERS=(0,l.s)().filter(e=>["contains","doesNotContain","startsWith","endsWith","equals"].includes(e.value)),m.NUMBER_FILTERS=(0,d.U)().filter(e=>["=","!=",">",">=","<","<="].includes(e.value)),m.DATE_FILTERS=(0,c.a)().filter(e=>["after","onOrAfter","before","onOrBefore"].includes(e.value));var f=a(39378),A=a.n(f);class y{static getArrayInfiniteQueryParams(e,t){return e.length?A().sumBy(t,e=>e.length):null}}class C{}C.dismissNotification=async(e,t,a,r,n,i)=>{try{await n({id:t});let s=e.filter(e=>e.id!==t);a(r(s)),s.length||i()}catch(e){(0,s.yv)("An error occurred while dismissing notification",{variant:"error"})}};var v=a(77713),B=a.n(v);class P{}P.replaceHtmlCharacterCodes=e=>document.createTextNode(B()(e)).data},4619:function(){},59468:function(){},44349:function(){},86306:function(){}}]);